# 剪切板增强功能使用指南

## 🚀 快速开始

1. **启动应用**
   ```bash
   npm run dev
   ```

2. **访问剪切板页面**
   - 打开浏览器访问 `http://localhost:3000`
   - 创建或访问任意剪切板代码页面

## 📝 新功能详解

### 1. 行号显示

**功能说明**：在文本编辑器左侧显示行号，帮助定位和编辑代码。

**使用方法**：
- 在编辑模式或分屏模式下，点击"显示行号"/"隐藏行号"按钮
- 行号会自动与文本内容同步滚动
- 支持任意长度的文本内容

**特性**：
- ✅ 自动计算行数
- ✅ 滚动同步
- ✅ 响应式设计
- ✅ 可切换显示

### 2. Markdown 预览

**功能说明**：实时预览 Markdown 格式的文本内容。

**使用方法**：
1. 在编辑器顶部选择视图模式：
   - **编辑**：纯文本编辑模式
   - **预览**：Markdown 渲染预览
   - **分屏**：同时显示编辑和预览

2. 输入 Markdown 内容，实时查看渲染效果

**支持的 Markdown 语法**：
- 标题 (`# ## ###`)
- 文本格式 (`**粗体** *斜体*`)
- 列表 (`- 1.`)
- 代码块 (` ``` `)
- 表格
- 链接和图片
- 引用块 (`>`)
- 任务列表 (`- [ ] - [x]`)
- 删除线 (`~~文本~~`)

### 3. 代码语法高亮

**功能说明**：在 Markdown 预览中为代码块提供语法高亮。

**使用方法**：
```markdown
\`\`\`javascript
function hello() {
  console.log("Hello, World!");
}
\`\`\`
```

**支持的语言**：
- JavaScript/TypeScript
- Python
- Java
- C/C++
- HTML/CSS
- Bash/Shell
- JSON
- Markdown
- 等等...

## 🎨 界面说明

### 视图模式切换
```
[编辑] [预览] [分屏]  [显示行号]  [保存]
```

- **编辑模式**：专注于文本编辑，显示行号选项可用
- **预览模式**：查看 Markdown 渲染效果
- **分屏模式**：左侧编辑，右侧预览（桌面端）或上下布局（移动端）

### 响应式布局

**桌面端 (≥1024px)**：
```
┌─────────────┬─────────────┐
│    编辑区    │   预览区    │
│             │             │
│  [行号] 文本 │  渲染内容   │
└─────────────┴─────────────┘
```

**移动端 (<768px)**：
```
┌─────────────────────────┐
│       编辑区            │
│    [行号] 文本          │
├─────────────────────────┤
│       预览区            │
│      渲染内容           │
└─────────────────────────┘
```

## ⌨️ 快捷键

- `Ctrl+S` (或 `Cmd+S`): 手动保存
- `Tab`: 插入制表符（不会切换焦点）

## 🔧 功能特性

### 自动保存
- 保持原有的自动保存功能
- 默认延迟 500ms
- 静默保存，不干扰编辑体验

### 内容统计
- 实时显示字符数、行数、单词数
- 文件大小估算（KB）

### 深色模式支持
- 语法高亮适配深色主题
- 更好的对比度和可读性

## 📱 移动端优化

- 触摸友好的界面
- 防止输入时的页面缩放
- 优化的滚动体验
- 自适应按钮大小

## 🛠️ 开发说明

### 新增文件
- `src/components/EnhancedTextEditor.tsx` - 增强版编辑器
- `src/styles/highlight.css` - 语法高亮样式

### 修改文件
- `src/components/LazyTextEditor.tsx` - 更新为使用增强版编辑器
- `src/app/globals.css` - 导入语法高亮样式

### 新增依赖
```json
{
  "react-markdown": "^9.0.1",
  "remark-gfm": "^4.0.0",
  "rehype-highlight": "^7.0.0", 
  "rehype-raw": "^7.0.0"
}
```

## 🐛 故障排除

### 常见问题

1. **语法高亮不显示**
   - 确保已正确导入 highlight.css
   - 检查代码块是否使用正确的语法标记

2. **行号不同步**
   - 确保 textarea 的 line-height 与行号组件一致
   - 检查滚动事件监听是否正常

3. **分屏模式布局异常**
   - 检查 CSS Grid 支持
   - 确认响应式断点设置

### 性能优化

- 使用 `memo` 包装组件避免不必要的重渲染
- 使用 `throttle` 和 `debounce` 优化频繁操作
- 懒加载编辑器组件

## 📞 技术支持

如果遇到问题，请检查：
1. Node.js 版本 (推荐 18+)
2. 浏览器兼容性
3. 控制台错误信息
4. 网络连接状态

---

**享受增强的剪切板体验！** 🎉